import{e as n,o,f as t,H as f,t as p,p as H,_ as g,s as b,q as I,c as h,F as x,v as A,n as w,k as s,a as N,h as d,w as $,d as V,D as W,r as j,i as U,j as q,y as v,I as y,l as E}from"./index-Cx30kA3y.js";const O={key:0,class:"roulette_popup__box"},Y={class:"roulette_popup___name"},G=["src"],J={__name:"RoulettePopup",props:{lotteryNum:{type:[String,Number],default:""},rouletteAwardArr:{type:Array,default:()=>[]},popupHideFn:{type:Function,default:()=>{}}},setup(c){const e=c;return(i,_)=>(o(),n("div",{class:"roulette_popup",onClick:_[2]||(_[2]=(...u)=>e.popupHideFn&&e.popupHideFn(...u))},[t("div",{class:"roulette_popup_wrap",onClick:_[1]||(_[1]=H(()=>{},["stop"]))},[e.lotteryNum.toString()?(o(),n("section",O,[_[4]||(_[4]=t("p",{class:"roulette_popup___title"},"恭喜轉到",-1)),t("h3",Y,p(e.rouletteAwardArr[e.lotteryNum].name),1),t("img",{class:"roulette_popup___img",src:e.rouletteAwardArr[e.lotteryNum].src},null,8,G),t("div",{class:"roulette_popup___close",onClick:_[0]||(_[0]=(...u)=>e.popupHideFn&&e.popupHideFn(...u))},_[3]||(_[3]=[t("span",{class:"roulette_popup___close_cross"},null,-1)]))])):f("",!0)])]))}},K={class:"roulette_rule"},Q={class:"roulette_rule_wrap"},X=["innerHTML"],Z={__name:"RouletteRule",props:{rouletteRule:{type:String,default:"text"}},setup(c){const e=c;return(i,_)=>(o(),n("div",K,[t("article",Q,[_[0]||(_[0]=t("h2",{class:"roulette_rule__title"},"活動規則",-1)),t("div",{class:"roulette_rule__content",innerHTML:e.rouletteRule},null,8,X)])]))}},ee={},te={class:"DAtxtLoad DAtxtLoad-white"};function _e(c,e){return o(),n("p",te,e[0]||(e[0]=[b(" Loading"),t("span",{class:"DAtxtLoad_ing-white"},".",-1)]))}const oe=g(ee,[["render",_e]]),re={class:"roulette_main___winner"},ne={class:"roulette_main___winner__nav"},se={class:"roulette_main___winner__slide"},ae={class:"roulette_main___winner__slide_list"},le={class:"roulette_main___winner__slide__item_date"},ie={class:"roulette_main___winner__slide__item_name"},ue={class:"roulette_main___winner__slide__item_prize"},ce={class:"roulette_main___winner__slide_list"},de={class:"roulette_main___winner__slide__item_date"},pe={class:"roulette_main___winner__slide__item_name"},me={class:"roulette_main___winner__slide__item_prize"},we={__name:"RouletteMainWinner",props:{winnerListArr:{type:Array,default:()=>[]},winnerRecordArr:{type:Array,default:()=>[]}},setup(c){const e=c,i=I(!1),_=u=>i.value=u;return(u,r)=>{const a=oe;return o(),n("div",re,[t("div",{class:w(["roulette_main___winner_wrap",{"roulette_main___winner_wrap-record":s(i)}])},[t("div",ne,[t("p",{class:"roulette_main___winner__nav_item",onClick:r[0]||(r[0]=l=>_(!1))},"中獎名單"),t("p",{class:"roulette_main___winner__nav_item",onClick:r[1]||(r[1]=l=>_(!0))},"中獎記錄"),r[2]||(r[2]=t("span",{class:"roulette_main___winner__nav_cursor"},null,-1))]),t("aside",se,[t("ul",ae,[t("li",null,[e.winnerListArr.length?f("",!0):(o(),h(a,{key:0}))]),(o(!0),n(x,null,A(e.winnerListArr,l=>(o(),n("li",{key:l.name,class:"roulette_main___winner__slide__item"},[t("p",le,p(l.date),1),t("p",ie,p(l.name),1),t("p",ue,p(l.prize),1)]))),128))]),t("ul",ce,[t("li",null,[e.winnerRecordArr.length?f("",!0):(o(),h(a,{key:0}))]),(o(!0),n(x,null,A(e.winnerRecordArr,l=>(o(),n("li",{key:l.name,class:"roulette_main___winner__slide__item"},[t("p",de,p(l.date),1),t("p",pe,p(l.name),1),t("p",me,p(l.prize),1)]))),128))])])],2)])}}},xe={class:"roulette_main___box__times"},Ae={class:"roulette_main___box__times_wrap"},fe={class:"roulette_main___box__times__num"},ve={__name:"RouletteMainBoxTimes",props:{drawTimesNum:{type:Number,default:0}},setup(c){const e=c;return(i,_)=>(o(),n("div",xe,[t("p",Ae,[t("span",fe,p(e.drawTimesNum),1),_[0]||(_[0]=t("span",{class:"roulette_main___box__times__unit"},"次",-1))])]))}},ye={class:"Box3D mBox3D LoadBox3D DAwhite"},he={class:"Box3D_space mBox3D_space LoadBox3D_space"},L={__name:"Wbox3dLoading",setup(c){const e=N(["front","back","up","down","left","right"]);return(i,_)=>(o(),n("div",ye,[t("div",he,[(o(!0),n(x,null,A(s(e),u=>(o(),n("div",{key:u,class:w(["Box3D__side LoadBox3D__side mBox3D__"+u])},null,2))),128))]),_[0]||(_[0]=t("div",{class:"LoadBox3D_load"},[b(" loading"),t("span",{class:"LoadBox3D_load_ing"},".")],-1))]))}},$e={},Re={class:"roulette_main___box__coin"};function ge(c,e){return o(),n("div",Re,[(o(),n(x,null,A(6,i=>t("span",{key:i,class:w(["roulette_main___box__coin_wrap roulette_main___box__coin_"+i])},null,2)),64))])}const be=g($e,[["render",ge]]),Ne={class:"roulette_main___box__part__prizeName"},Le={class:"roulette_main___box__part__prizeName_txt roulette_main___box__part__prizeName_txt-1"},ke={class:"roulette_main___box__part__prizeName_txt roulette_main___box__part__prizeName_txt-2"},Te={__name:"RouletteMainBoxPart",props:{rouletteAwardArr:{type:Array,default:()=>[]}},setup(c){const e=c;return(i,_)=>(o(),n("ul",{class:w(["roulette_main___box__part roulette_main___box__part-"+e.rouletteAwardArr.length])},[(o(!0),n(x,null,A(e.rouletteAwardArr,(u,r)=>(o(),n("li",{key:r,class:w(["roulette_main___box__part_list","roulette_main___box__part_list-prize"+u.awards,"roulette_main___box__part_list-num"+r])},[_[0]||(_[0]=t("span",{class:"roulette_main___box__part__color"},null,-1)),t("p",Ne,[t("span",Le,p(u.name),1),t("span",ke,p(u.name),1)]),t("span",{class:w(["roulette_main___box__part__awards roulette_main___box__part__awards-"+u.awards])},null,2)],2))),128))],2))}},Pe={class:"roulette_main___awards"},ze={key:0},Be={class:"roulette_main___awards___prize"},De=["src"],Me={class:"roulette_main___awards___name"},Se={__name:"RouletteMainAwards",props:{awardsPrizeImgArr:{type:Array,default:()=>[]}},setup(c){const e=c;return(i,_)=>{const u=L;return o(),n("ul",Pe,[e.awardsPrizeImgArr.length?f("",!0):(o(),n("li",ze,[d(u)])),(o(!0),n(x,null,A(e.awardsPrizeImgArr,r=>(o(),n("li",{key:r.name,class:"roulette_main___awards_item"},[t("div",{class:w(["roulette_main___awards__wrap roulette_main___awards__wrap-"+r.awards])},[_[0]||(_[0]=t("span",{class:"roulette_main___awards___medals"},null,-1)),t("div",Be,[t("img",{class:"roulette_main___awards___prize_img",src:r.src},null,8,De)]),t("p",Me,p(r.name),1)],2)]))),128))])}}},R=c=>{const e=c.slice();for(let i=e.length-1;i>0;i--){let _=Math.floor(Math.random()*(i+1));[e[i],e[_]]=[e[_],e[i]]}return e},Ce={class:"roulette_main"},Fe={class:"roulette_main_wrap"},He={class:"roulette_main__nav"},Ie={class:"roulette_main__nav_item"},Ve={class:"roulette_main__nav___icon"},We={class:"roulette_main__nav_item"},je={class:"roulette_main__nav_item"},Ue=["value"],qe={class:"roulette_main__nav_item"},Ee={class:"roulette_main__content"},Oe={class:"roulette_main___box"},Ye={class:"roulette_main___box__btn_logo"},Je={__name:"roulette",setup(c){const e=N({className:"normal",drawTimes:16,selectPR:"",lotteryNum:"",ruleText:"",toSort:!1,isLottery:!1,popupShow:!1,PR:[],prizeName:[],rouletteAward:[],winnerList:[],winnerRecord:[]}),i=()=>e.popupShow=!1,_=()=>{e.drawTimes--,setTimeout(()=>{e.popupShow=!0,e.isLottery=!1},800)},u=()=>{if(e.isLottery)return!1;if(e.drawTimes<1)return alert("開獎次數歸零!"),!1;e.lotteryNum="",e.isLottery=!0,setTimeout(()=>{e.lotteryNum=Math.round(Math.random()*(e.rouletteAward.length-1)),setTimeout(_,1200)},1500)};return $(()=>e.toSort,r=>{e.lotteryNum="";const a=e.PR.filter(l=>l.title===e.selectPR);r?e.rouletteAward=a[0].rouletteAward:e.rouletteAward=R(a[0].rouletteAward)}),$(()=>e.selectPR,r=>{e.lotteryNum="";const a=e.PR.filter(l=>l.title===r);e.prizeName=a[0].rouletteAward.filter(l=>l.awards!==""),e.toSort?e.rouletteAward=a[0].rouletteAward:e.rouletteAward=R(a[0].rouletteAward)}),V(async()=>{window.scrollTo(0,0);try{const r=await W.get("https://kuas1091104337.github.io/DotA_img/json/roulette.json");e.PR=r.data.probability,e.winnerList=r.data.winnerList,e.winnerRecord=r.data.winnerRecord,e.selectPR=e.PR[0].title,e.ruleText=r.data.ruleContent,console.log(r.data)}catch(r){console.log(r.response.data)}}),(r,a)=>{const l=q,k=j("RouterLink"),T=Se,P=Te,z=be,B=L,D=ve,M=we,S=Z,C=J,F=E;return o(),n(x,null,[t("div",{class:w(["roulette",s(e).className,{"roulette-popupOpen":s(e).popupShow}])},[t("div",Ce,[t("div",Fe,[t("ul",He,[t("li",Ie,[d(k,{to:"/",class:"roulette_main__nav__link"},{default:U(()=>[t("span",Ve,[d(l,{name:"icon-dota",color:"#fff"})]),a[3]||(a[3]=t("span",{class:"roulette_main__nav___txt"},"Dot A",-1))]),_:1})]),t("li",We,[v(t("select",{"onUpdate:modelValue":a[0]||(a[0]=m=>s(e).className=m),class:"roulette_main__nav__select"},a[4]||(a[4]=[t("option",{value:"normal"},"普通版",-1),t("option",{value:"newYear"},"新年版",-1),t("option",{value:"xmas"},"聖誕節版",-1)]),512),[[y,s(e).className]])]),t("li",je,[v(t("select",{"onUpdate:modelValue":a[1]||(a[1]=m=>s(e).selectPR=m),class:"roulette_main__nav__select"},[(o(!0),n(x,null,A(s(e).PR,m=>(o(),n("option",{key:m.title,value:m.title},p(m.title),9,Ue))),128))],512),[[y,s(e).selectPR]])]),t("li",qe,[v(t("select",{"onUpdate:modelValue":a[2]||(a[2]=m=>s(e).toSort=m),class:"roulette_main__nav__select"},a[5]||(a[5]=[t("option",{value:!1},"亂數排序",-1),t("option",{value:!0},"小到大排序",-1)]),512),[[y,s(e).toSort]])])]),t("div",Ee,[d(T,{awardsPrizeImgArr:s(e).prizeName},null,8,["awardsPrizeImgArr"]),t("div",Oe,[t("div",{class:w(["roulette_main___box_wrap",s(e).lotteryNum!==""?"roulette_main___box_wrap-P"+s(e).rouletteAward.length+"-N"+s(e).lotteryNum:"",{"roulette_main___box_wrap-rotate":s(e).isLottery}])},[d(P,{rouletteAwardArr:s(e).rouletteAward},null,8,["rouletteAwardArr"]),d(z),s(e).rouletteAward.length?f("",!0):(o(),h(B,{key:0,class:"posCenter"})),s(e).rouletteAward.length?(o(),n("div",{key:1,class:"roulette_main___box__btn",onClick:u},[t("span",Ye,[d(l,{name:"icon-dota",color:"#ed1c24"})])])):f("",!0),d(D,{drawTimesNum:s(e).drawTimes},null,8,["drawTimesNum"])],2)]),d(M,{winnerListArr:s(e).winnerList,winnerRecordArr:s(e).winnerRecord},null,8,["winnerListArr","winnerRecordArr"])])])]),d(S,{rouletteRule:s(e).ruleText},null,8,["rouletteRule"]),d(C,{popupHideFn:i,lotteryNum:s(e).lotteryNum,rouletteAwardArr:s(e).rouletteAward},null,8,["lotteryNum","rouletteAwardArr"])],2),d(F,{class:"DAfoot-normal"})],64)}}};export{Je as default};
