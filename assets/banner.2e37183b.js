import{p as d,o as T,b as A,c as v,d as c,n as U,h as D,r as y,x as _,B as N,C as W,J as Y,e as J,F as C,q as F,g as I,i as h,_ as j,H as O}from"./index.a4b68b6c.js";import{_ as S}from"./Head.8b6b1797.js";const k="data:image/png;base64,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";const q=["src"],H={__name:"WaterfallLoadBox",props:{imgWidth:{type:Number,default:0},imgHeight:{type:Number,default:0},imgTop:{type:Number,default:0},imgLeft:{type:Number,default:0},imgSrc:{type:String,default:"test"}},setup(B){const a=B,l=d(!0),r=d(!1),e=d("");return T(()=>{const u=new Image;u.src=a.imgSrc,u.onload=()=>{l.value=!1,e.value=a.imgSrc},u.onerror=()=>{r.value=!0,l.value=!1,e.value=k}}),(u,g)=>(A(),v("div",{class:U(["WFloadBox",{load:l.value,error:r.value}]),style:D({width:a.imgWidth+"px",height:a.imgHeight+"px",top:a.imgTop+"px",left:a.imgLeft+"px"})},[c("img",{class:"WFloadBox_img",src:e.value},null,8,q)],6))}};const R={class:"DAbanner"},M=["src"],E=["onClick"],K=["onClick"],G=c("span",{class:"DAbanner_popup_close"},null,-1),Z={__name:"banner",setup(B){const a=d(null),l=d(0),r=d([]),e=y({imgIdx:0,imgSrc:"",portrait:!1,show:!1}),u=_(()=>{if(!l.value&&!r.value.length)return!1;const o=300,s=5,i=[],t=y({offsetY:[],column:1,columnWidth:o});return t.column=Math.ceil(l.value/o),t.columnWidth=Math.round(l.value/t.column),r.value.forEach(f=>{const n=f.height/f.width,p=t.offsetY.length<t.column?t.offsetY.length:t.offsetY.indexOf(Math.min(...t.offsetY)),m=Math.round((t.columnWidth-s*2)*n);t.offsetY.length===p&&t.offsetY.push(s),i.push({width:t.columnWidth-2*s,height:m,src:f.src,top:t.offsetY[p],left:t.columnWidth*p+s}),t.offsetY[p]+=m+s*2}),i}),g=()=>l.value=a.value.offsetWidth,w=(o,s,i)=>{if(i.currentTarget.classList.contains("error"))return!1;i.target.offsetHeight>i.target.offsetWidth&&(e.portrait=!0),e.show=!0,e.imgSrc=s,e.imgIdx=o},x=()=>{e.portrait=!1,e.show=!1,e.imgSrc=""},z=()=>{e.imgIdx++,b(e.imgIdx)},L=()=>{e.imgIdx--,b(e.imgIdx)},b=o=>{o=(o+r.value.length)%r.value.length,e.imgSrc=r.value[o].src,e.portrait=r.value[o].height>r.value[o].width;const s=new Image;s.src=e.imgSrc,s.onerror=()=>{e.portrait=!1,e.show=!1,e.imgSrc=""}};return T(async()=>{window.scrollTo(0,0);try{const o=await N.get("https://kuas1091104337.github.io/DotA_img/json/banner.json");r.value=o.data}catch(o){console.log(o.response.data)}document.body.classList.add("DAbannerBody"),g(),window.addEventListener("resize",W(g,400))}),Y(()=>{document.body.classList.remove("DAbannerBody"),window.removeEventListener("resize",W(g,400))}),(o,s)=>{const i=S,t=H,f=j;return A(),v(C,null,[J(i),c("div",R,[c("div",{class:"DAbanner_wrap",ref_key:"bnWrap",ref:a},[(A(!0),v(C,null,F(I(u),(n,p)=>(A(),O(t,{key:n.src,imgWidth:n.width,imgHeight:n.height,imgTop:n.top,imgLeft:n.left,imgSrc:n.src,onClick:m=>w(p,n.src,m)},null,8,["imgWidth","imgHeight","imgTop","imgLeft","imgSrc","onClick"]))),128))],512),c("div",{class:U(["DAbanner_popup",{portrait:e.portrait},{show:e.show}]),onClick:x},[c("img",{class:"DAbanner_popup_img",src:e.imgSrc,onClick:s[0]||(s[0]=h(()=>{},["stop"]))},null,8,M),c("div",{class:"DAbanner_popup_next",onClick:h(z,["stop"])},null,8,E),c("div",{class:"DAbanner_popup_prev",onClick:h(L,["stop"])},null,8,K),G],2)]),J(f,{class:"DAfoot-normal"})],64)}}};export{Z as default};
