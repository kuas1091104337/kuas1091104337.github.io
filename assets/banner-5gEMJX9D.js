import{q as m,d as C,e as B,o as A,f as u,k as c,m as N,n as w,a as y,x as F,D as Y,E as I,K as j,h as T,F as U,v as O,c as S,p as v,l as q}from"./index-CNwOqUnJ.js";import{_ as k}from"./Head-C388YzLN.js";const H="data:image/png;base64,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",R=["src"],M={__name:"WaterfallLoadBox",props:{imgWidth:{type:Number,default:0},imgHeight:{type:Number,default:0},imgTop:{type:Number,default:0},imgLeft:{type:Number,default:0},imgSrc:{type:String,default:"test"}},setup(b){const a=b,i=m(!0),s=m(!1),e=m("");return C(()=>{const p=new Image;p.src=a.imgSrc,p.onload=()=>{i.value=!1,e.value=a.imgSrc},p.onerror=()=>{s.value=!0,i.value=!1,e.value=H}}),(p,h)=>(A(),B("div",{class:w(["WFloadBox",{load:c(i),error:c(s)}]),style:N({width:a.imgWidth+"px",height:a.imgHeight+"px",top:a.imgTop+"px",left:a.imgLeft+"px"})},[u("img",{class:"WFloadBox_img",src:c(e)},null,8,R)],6))}},E={class:"DAbanner"},K=["src"],X={__name:"banner",setup(b){const a=m(null),i=m(0),s=m([]),e=y({imgIdx:0,imgSrc:"",portrait:!1,show:!1}),p=F(()=>{if(!i.value&&!s.value.length)return!1;const o=300,r=5,l=[],t=y({offsetY:[],column:1,columnWidth:o});return t.column=Math.ceil(i.value/o),t.columnWidth=Math.round(i.value/t.column),s.value.forEach(d=>{const n=d.height/d.width,f=t.offsetY.length<t.column?t.offsetY.length:t.offsetY.indexOf(Math.min(...t.offsetY)),g=Math.round((t.columnWidth-r*2)*n);t.offsetY.length===f&&t.offsetY.push(r),l.push({width:t.columnWidth-2*r,height:g,src:d.src,top:t.offsetY[f],left:t.columnWidth*f+r}),t.offsetY[f]+=g+r*2}),l}),h=()=>i.value=a.value.offsetWidth,W=I(h,400),z=(o,r,l)=>{if(l.currentTarget.classList.contains("error"))return!1;l.target.offsetHeight>l.target.offsetWidth&&(e.portrait=!0),e.show=!0,e.imgSrc=r,e.imgIdx=o},D=()=>{e.portrait=!1,e.show=!1,e.imgSrc=""},L=()=>{e.imgIdx++,J(e.imgIdx)},x=()=>{e.imgIdx--,J(e.imgIdx)},J=o=>{o=(o+s.value.length)%s.value.length,e.imgSrc=s.value[o].src,e.portrait=s.value[o].height>s.value[o].width;const r=new Image;r.src=e.imgSrc,r.onerror=()=>{e.portrait=!1,e.show=!1,e.imgSrc=""}};return C(async()=>{window.scrollTo(0,0);try{const o=await Y.get("https://kuas1091104337.github.io/DotA_img/json/banner.json");s.value=o.data}catch(o){console.log(o.response.data)}document.body.classList.add("DAbannerBody"),h(),window.addEventListener("resize",W)}),j(()=>{document.body.classList.remove("DAbannerBody"),window.removeEventListener("resize",W)}),(o,r)=>{const l=k,t=M,d=q;return A(),B(U,null,[T(l),u("div",E,[u("div",{class:"DAbanner_wrap",ref_key:"bnWrap",ref:a},[(A(!0),B(U,null,O(c(p),(n,f)=>(A(),S(t,{key:n.src,imgWidth:n.width,imgHeight:n.height,imgTop:n.top,imgLeft:n.left,imgSrc:n.src,onClick:g=>z(f,n.src,g)},null,8,["imgWidth","imgHeight","imgTop","imgLeft","imgSrc","onClick"]))),128))],512),u("div",{class:w(["DAbanner_popup",{portrait:c(e).portrait},{show:c(e).show}]),onClick:D},[u("img",{class:"DAbanner_popup_img",src:c(e).imgSrc,onClick:r[0]||(r[0]=v(()=>{},["stop"]))},null,8,K),u("div",{class:"DAbanner_popup_next",onClick:v(L,["stop"])}),u("div",{class:"DAbanner_popup_prev",onClick:v(x,["stop"])}),r[1]||(r[1]=u("span",{class:"DAbanner_popup_close"},null,-1))],2)]),T(d,{class:"DAfoot-normal"})],64)}}};export{X as default};
